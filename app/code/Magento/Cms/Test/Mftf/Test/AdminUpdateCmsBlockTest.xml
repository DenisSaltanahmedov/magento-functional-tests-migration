<?xml version="1.0" encoding="UTF-8"?>
<!--
 /**
  * Copyright Â© Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
-->

<tests xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:mftf:Test/etc/testSchema.xsd">
    <test name="AdminUpdateCmsBlockTest">
        <annotations>
            <features value="Cms"/>
            <title value="Update a CMS block"/>
            <description value="Admin should be able to update a CMS block"/>
            <group value="cMSContent"/>
            <group value="mtf_migrated"/>
        </annotations>
        <before>
            <actionGroup ref="LoginActionGroup" stepKey="loginGetFromGeneralFile"/>
            <actionGroup ref="DisabledWYSIWYG" stepKey="disableWYSIWYG"/>
        </before>
        <after>
            <actionGroup ref="deleteBlock" stepKey="deleteCreatedBlock">
                <argument name="Block" value="_defaultBlock"/>
            </actionGroup>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>

        <amOnPage url="{{CmsNewBlock.url}}" stepKey="amOnBlocksCreationForm"/>
        <waitForPageLoad stepKey="waitForPageLoad1"/>
        <!--Verify Save&Duplicate button and Save&Close button-->
        <click selector="{{BlockNewPagePageActionsSection.expandSplitButton}}"  stepKey="expandSplitBtn1" />
        <see selector="{{BlockNewPagePageActionsSection.saveAndDuplicate}}" userInput="Save &amp; Duplicate" stepKey="seeSaveAndDuplicate"/>
        <see selector="{{BlockNewPagePageActionsSection.saveAndClose}}" userInput="Save &amp; Close" stepKey="seeSaveAndClose"/>
        <!--Create new CMS Block page-->
        <actionGroup ref="FillOutBlockContent" stepKey="FillOutBlockContent"/>
        <click selector="{{BlockNewPagePageActionsSection.expandSplitButton}}"  stepKey="expandSplitBtn2" />
        <click selector="{{BlockNewPagePageActionsSection.saveAndClose}}" stepKey="clickSaveAndClose"/>
        <waitForPageLoad stepKey="waitForPageLoad3"/>
        <see userInput="You saved the block." stepKey="seeSavedBlockMsgOnGrid"/>
        <seeElement selector="div[data-role='grid-wrapper']" stepKey="seeGridPage" />
        <!--&lt;!&ndash;Update CMS Block &ndash;&gt;-->
        <!--<actionGroup ref="updateBlock" stepKey="updateCreatedBlock">-->
            <!--<argument name="Block" value="_defaultBlock"/>-->
        <!--</actionGroup>-->
        <!--&lt;!&ndash;Create SubCategory and check CMS Block&ndash;&gt;-->
        <!--<amOnPage url="{{AdminCategoryPage.url}}" stepKey="openAdminCategoryIndexPage"/>-->
        <!--<waitForPageLoad stepKey="waitForPageToLoaded"/>-->
        <!--<click selector="{{AdminCategorySidebarActionSection.AddSubcategoryButton}}" stepKey="clickOnAddSubCategoryButton"/>-->
        <!--<waitForPageLoad stepKey="waitForPageToLoadedSubCategory"/>-->
        <!--<click selector="{{AdminProductFormSection.contentTab}}" stepKey="clickContentTab"/>-->
        <!--<scrollTo selector="{{AdminProductFormSection.contentTab}}" stepKey="scrollToContentTab"/>-->
        <!--<waitForElementVisible selector="{{AdminCategoryContentSection.AddCMSBlock}}" stepKey="waitForAddCMSBlockVisible"/>-->
        <!--<see selector="{{AdminCategoryContentSection.AddCMSBlock}}"-->
                 <!--userInput="{{_defaultBlock.title}}"-->
                 <!--stepKey="AdminCategoryContentSectionCMSBlock"/>-->
        <!--Disable CMS Block-->
        <actionGroup ref="disableBlock" stepKey="disableCreatedBlock">
            <argument name="Block" value="_defaultBlock"/>
        </actionGroup>
        <!--Create SubCategory and check CMS Block-->
        <amOnPage url="{{AdminCategoryPage.url}}" stepKey="openAdminCategoryIndexPageCheckDisabledCMSBlock"/>
        <waitForPageLoad stepKey="waitForPageToLoadedCheckDisabledCMSBlock"/>
        <click selector="{{AdminCategorySidebarActionSection.AddSubcategoryButton}}"
               stepKey="clickOnAddSubCategoryButtonCheckDisabledCMSBlock"/>
        <waitForPageLoad stepKey="waitForPageToLoadedSubCategoryCheckDisabledCMSBlock"/>
        <click selector="{{AdminProductFormSection.contentTab}}" stepKey="clickContentTabCheckDisabledCMSBlock"/>
        <scrollTo selector="{{AdminProductFormSection.contentTab}}" stepKey="scrollToContentTabCheckDisabledCMSBlock"/>
        <waitForElementVisible selector="{{AdminCategoryContentSection.AddCMSBlock}}"
                               stepKey="waitForAddCMSBlockVisibleCheckDisabledCMSBlock"/>
        <dontSee selector="{{AdminCategoryContentSection.AddCMSBlock}}"
             userInput="{{_defaultBlock.title}}"
             stepKey="AdminCategoryContentSectionCMSBlockCheckDisabledCMSBlock"/>
    </test>
</tests>
